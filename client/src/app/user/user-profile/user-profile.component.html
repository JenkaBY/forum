<div class="d-flex col-12 p-2 justify-content-center" style="border: thin">
    <div *ngIf="loggedUser" class="row">
        <div class="col">
            <legend>{{loggedUser.name}}'s profile</legend>
            <form [formGroup]="userForm" (ngSubmit)="onSave()">
                <div class="col-2 w-50" *ngIf="loggedUser.imagePath">
                    <img src='{{ loggedUser.imagePath }}'
                         alt='{{ loggedUser.name }}'
                         class="img-thumbnail"
                         style="width:100px;">
                </div>
                <!-- NAME -->
                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="name">{{ 'USER.NAME' | translate }}</label>
                            <input
                                    type="text"
                                    id="name"
                                    formControlName="name"
                                    class="form-control">
                            <div *ngIf="name.invalid && name.touched">
                                <div *ngIf="name.errors['minlength']" class="invalid-feedback">
                                    {{ "VALIDATION.MIN"| translate:minNameLength }}
                                </div>
                                <div *ngIf="name.errors['maxlength']" class="invalid-feedback">
                                    {{ "VALIDATION.MAX"| translate:maxNameLength }}
                                </div>
                                <div *ngIf="name.errors['required']" class="invalid-feedback">
                                    {{ "VALIDATION.REQUIRED" | translate }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- EMAIL -->
                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <label for="email">{{ 'USER.EMAIL' | translate }}</label>
                            <input type="text"
                                   id="email"
                                   formControlName="email"
                                   class="form-control">
                            <div *ngIf="email.invalid && email.touched" class="invalid-feedback">
                                {{ "VALIDATION.VALID_EMAIL" | translate }}
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Radio buttons -->
                <div class="form-check form-check-inline">
                    <label class="form-check-label">
                        <input class="form-check-input"
                               type="radio"
                               formControlName="imageOption"
                               id="imagePathRadio"
                               value="imagePath">{{ "PROFILE.INSERT_IMAGE" | translate }}
                    </label>
                </div>
                <div class="form-check form-check-inline">
                    <label class="form-check-label">
                        <input class="form-check-input"
                               type="radio"
                               formControlName="imageOption"
                               id="uploadImageRadio"
                               value="uploadImage">{{ "PROFILE.UPLOAD_IMAGE" | translate }}
                    </label>
                </div>
                <ng-template *ngIf="imagePathOption.value === 'imagePath'; else uploadImage;">
                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="email">{{ 'USER.IMAGE_PATH' | translate }}</label>
                                <input type="text"
                                       id="imagePath"
                                       formControlName="imagePath"
                                       class="form-control">
                            </div>
                        </div>
                    </div>
                </ng-template>
                <ng-template #uploadImage>
                    <div class="form-group">
                        <input type="file"
                               #fileInput
                               enctype='multipart/form-data'
                               placeholder="Upload file..."
                               class="form-control-file"
                               aria-describedby="fileHelp"/>
                        <button type="button" (click)="upload()">Upload</button>
                    </div>
                </ng-template>
                <div class="row">
                    <div class="col-3">
                        <button type="submit" class="btn btn-success pull-left" [disabled]="userForm.invalid || saving">
                            {{ 'BUTTON.SAVE'| translate }}
                        </button>
                    </div>
                    <div class="col-2">
                        <button type="button" class="btn btn-warning pull-12" (click)="onBack()">
                            {{ 'BUTTON.BACK'| translate }}
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
